<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B1+ Vocabulary Assessment</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        :root {
            --primary: #1a73e8;
            --success: #34a853;
            --warning: #fbbc04;
            --danger: #ea4335;
            --bg: #f8f9fa;
            --text: #202124;
        }

        body {
            font-family: 'Google Sans', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: white;
            width: 100%;
            max-width: 850px;
            padding: 40px;
            border-radius: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            position: relative;
            text-align: center; /* CƒÉn gi·ªØa m·∫∑c ƒë·ªãnh */
        }

        /* ANIMATIONS */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes popIn { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

        /* LOGIN SCREEN */
        .screen-box { animation: fadeIn 0.5s; }
        h1 { color: var(--primary); margin-bottom: 10px; }
        p.subtitle { color: #5f6368; margin-bottom: 30px; font-size: 18px; }

        input[type="text"] {
            width: 70%;
            padding: 16px;
            font-size: 18px;
            border: 2px solid #dadce0;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 700;
            text-transform: uppercase;
            outline: none;
            transition: 0.3s;
        }
        input[type="text"]:focus { border-color: var(--primary); box-shadow: 0 0 0 4px rgba(26,115,232,0.1); }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 16px 40px;
            font-size: 18px;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.1s;
            box-shadow: 0 4px 10px rgba(26,115,232,0.3);
        }
        .btn:hover { background: #1557b0; transform: translateY(-2px); }

        /* QUIZ SCREEN */
        .quiz-header {
            display: flex;
            justify-content: space-between;
            font-weight: 600;
            color: #5f6368;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .progress-track {
            height: 8px;
            background: #f1f3f4;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--primary), var(--success));
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .question-text {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 30px;
            line-height: 1.6;
            text-align: left; /* C√¢u h·ªèi cƒÉn tr√°i cho d·ªÖ ƒë·ªçc */
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        @media (max-width: 600px) { .options-grid { grid-template-columns: 1fr; } }

        .option-card {
            background: white;
            border: 2px solid #e8eaed;
            padding: 20px;
            font-size: 18px;
            border-radius: 16px;
            cursor: pointer;
            text-align: left;
            font-weight: 500;
            transition: all 0.2s;
            position: relative;
        }
        .option-card:hover:not(.disabled) { background: #f8f9fa; border-color: #bdc1c6; }
        
        .correct { background: #e6f4ea !important; border-color: var(--success) !important; color: var(--success); font-weight: 700; }
        .wrong { background: #fce8e6 !important; border-color: var(--danger) !important; color: var(--danger); font-weight: 700; }
        .disabled { pointer-events: none; opacity: 0.8; }

        /* FEEDBACK SECTION */
        #feedback-section {
            display: none;
            margin-top: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 16px;
            border-left: 6px solid var(--primary);
            text-align: left;
            animation: fadeIn 0.3s ease-out;
        }

        .feedback-title { font-size: 22px; font-weight: 800; margin-bottom: 10px; display: block; }
        .feedback-correct { color: var(--success); }
        .feedback-wrong { color: var(--danger); }

        /* STYLE CHO EMOJI */
        .emoji-display {
            font-size: 80px; /* K√≠ch th∆∞·ªõc Emoji l·ªõn */
            display: block;
            margin: 10px 0 20px 0;
            text-align: center;
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            line-height: 1;
        }

        .vocab-box {
            background: white;
            padding: 15px;
            border-radius: 12px;
            border: 1px dashed #ccc;
            margin-top: 15px;
        }
        .vocab-item { margin-bottom: 6px; font-size: 16px; color: #444; }
        .vocab-hl { color: var(--primary); font-weight: 700; }

        .btn-next {
            width: 100%;
            margin-top: 20px;
            background: #333;
            color: white;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
        }

        /* RESULT SCREEN */
        .result-border {
            border: 5px solid transparent; 
            padding: 40px;
            border-radius: 24px;
        }
        .score-display { font-size: 64px; font-weight: 800; margin: 10px 0; }
        .score-percent { font-size: 24px; color: #555; font-weight: 600; }

        .stats-table { width: 100%; margin-top: 30px; border-collapse: collapse; }
        .stats-table td { padding: 12px 0; border-bottom: 1px solid #eee; font-size: 18px; text-align: left; }
        .stats-table td:last-child { text-align: right; font-weight: 700; color: #202124; }

    </style>
</head>
<body>

<div class="container">
    
    <div id="login-screen" class="screen-box">
        <h1>VOCABULARY CHALLENGE</h1>
        <p class="subtitle">Level B1+ ‚Ä¢ 50 Questions ‚Ä¢ Randomized</p>
        
        <div style="margin: 40px 0;">
            <label style="display:block; margin-bottom:10px; font-weight:600; font-size:14px; color:#555; text-transform:uppercase;">Enter Your Full Name</label>
            <input type="text" id="username" placeholder="e.g. NGUYEN VAN AN" autocomplete="off">
        </div>

        <button class="btn" onclick="startQuiz()">START QUIZ</button>
        <p id="error-msg" style="color: var(--danger); display: none; margin-top: 15px; font-weight:600;">‚ö†Ô∏è Please enter your name to proceed.</p>
    </div>

    <div id="quiz-screen" style="display: none; text-align: left;">
        <div class="quiz-header">
            <span id="player-name">Player Name</span>
            <span id="timer-display">00:00</span>
        </div>
        
        <div class="progress-track"><div id="progress-bar" class="progress-bar"></div></div>
        <div style="display: flex; justify-content: space-between; margin-bottom: 10px; color: #888; font-size: 14px; font-weight: 600;">
            <span>QUESTION <span id="q-current">1</span> of 50</span>
        </div>

        <div id="question-text" class="question-text">Loading...</div>
        <div id="options-container" class="options-grid"></div>

        <div id="feedback-section">
            <span id="feedback-title" class="feedback-title"></span>
            
            <div id="emoji-display" class="emoji-display"></div>

            <div class="vocab-box">
                <div style="font-size: 14px; text-transform: uppercase; font-weight: 700; color: #888; margin-bottom: 10px;">üìñ Vietnamese Definitions:</div>
                <div id="vocab-definitions"></div>
            </div>

            <button class="btn-next" onclick="nextQuestion()">NEXT QUESTION ‚ûú</button>
        </div>
    </div>

    <div id="result-screen" class="screen-box" style="display: none;">
        <div id="result-container" class="result-border">
            <h2 id="result-msg" style="text-transform: uppercase; margin: 0;">RESULT</h2>
            
            <div id="result-emoji" class="emoji-display"></div>

            <div class="score-display" id="final-score">0/50</div>
            <div class="score-percent" id="final-percent">0%</div>

            <table class="stats-table">
                <tr><td style="color:#666;">Student Name</td><td id="res-name">---</td></tr>
                <tr><td style="color:#666;">Date</td><td id="res-date">---</td></tr>
                <tr><td style="color:#666;">Time Taken</td><td id="res-duration" style="color: var(--primary);">---</td></tr>
                <tr><td style="color:#666;">Accuracy</td><td id="res-accuracy">---</td></tr>
            </table>

            <p style="margin-top: 30px; font-size: 14px; color: #999; font-style: italic;">(Please screenshot this page to submit your result)</p>
            <button class="btn" style="background: #5f6368; margin-top: 15px;" onclick="location.reload()">Restart Quiz</button>
        </div>
    </div>

</div>

<script>
    // --- 1. DATA: DICTIONARY ---
    const dictionary = {
        "ACCEPT": "Ch·∫•p nh·∫≠n", "ACCOMPANY": "ƒêi c√πng/H·ªô t·ªëng", "ACHIEVE": "ƒê·∫°t ƒë∆∞·ª£c", "ACT": "H√†nh ƒë·ªông", "ADD": "Th√™m v√†o",
        "ADAPT": "Th√≠ch nghi", "AFFECT": "·∫¢nh h∆∞·ªüng", "ADMIRE": "Ng∆∞·ª°ng m·ªô", "ADMIT": "Th·ª´a nh·∫≠n", "ADVISE": "Khuy√™n b·∫£o",
        "AGREE": "ƒê·ªìng √Ω", "AIM": "M·ª•c ƒë√≠ch", "ALLOW": "Cho ph√©p", "ANNOY": "L√†m phi·ªÅn", "ANSWER": "Tr·∫£ l·ªùi",
        "APOLOGISE": "Xin l·ªói", "APPEAR": "Xu·∫•t hi·ªán", "APPLY": "N·ªôp ƒë∆°n/√Åp d·ª•ng", "APPROACH": "Ti·∫øp c·∫≠n", "APPROVE": "T√°n th√†nh",
        "ARGUE": "Tranh c√£i", "ARRANGE": "S·∫Øp x·∫øp", "ASK": "H·ªèi", "ATTACH": "ƒê√≠nh k√®m", "ATTEMPT": "C·ªë g·∫Øng",
        "ATTEND": "Tham d·ª±", "ATTRACT": "Thu h√∫t", "AVOID": "Tr√°nh", "BEAT": "ƒê√°nh b·∫°i", "BEHAVE": "C∆∞ x·ª≠",
        "BLAME": "ƒê·ªï l·ªói", "BREAK": "L√†m v·ª°", "BREATHE": "Th·ªü", "BURN": "ƒê·ªët ch√°y", "BURY": "Ch√¥n c·∫•t",
        "CALL": "G·ªçi", "CANCEL": "H·ªßy b·ªè", "CARE": "Quan t√¢m", "CELEBRATE": "ƒÇn m·ª´ng", "CHANGE": "Thay ƒë·ªïi",
        "CHARGE": "T√≠nh ph√≠", "CHECK": "Ki·ªÉm tra", "COMPLAIN": "Ph√†n n√†n", "CONNECT": "K·∫øt n·ªëi", "CONCENTRATE": "T·∫≠p trung",
        "CONSIDER": "C√¢n nh·∫Øc", "CONTAIN": "Ch·ª©a ƒë·ª±ng", "CONTINUE": "Ti·∫øp t·ª•c", "CONTROL": "Ki·ªÉm so√°t", "CONVINCE": "Thuy·∫øt ph·ª•c",
        "CRASH": "Va ch·∫°m", "DAMAGE": "L√†m h·ªèng", "DECORATE": "Trang tr√≠", "DECREASE": "Gi·∫£m", "DEFEND": "B·∫£o v·ªá",
        "DELAY": "Tr√¨ ho√£n", "DELETE": "X√≥a", "DELIVER": "Giao h√†ng", "DEMAND": "ƒê√≤i h·ªèi", "DEPART": "Kh·ªüi h√†nh",
        "DESERVE": "X·ª©ng ƒë√°ng", "DESIGN": "Thi·∫øt k·∫ø", "DESTROY": "Ph√° h·ªßy", "DEVELOP": "Ph√°t tri·ªÉn", "DIRECT": "Ch·ªâ ƒë·∫°o",
        "DISAGREE": "Kh√¥ng ƒë·ªìng √Ω", "DISAPPEAR": "Bi·∫øn m·∫•t", "DISAPPOINT": "G√¢y th·∫•t v·ªçng", "DISCOVER": "Kh√°m ph√°", "DISPLAY": "Tr∆∞ng b√†y",
        "EMPLOY": "Thu√™", "ENCOURAGE": "Khuy·∫øn kh√≠ch", "ENTERTAIN": "Gi·∫£i tr√≠", "ESCAPE": "Tr·ªën tho√°t", "EVALUATE": "ƒê√°nh gi√°",
        "EXCHANGE": "Trao ƒë·ªïi", "EXCUSE": "Tha th·ª©", "EXIST": "T·ªìn t·∫°i", "EXPECT": "Mong ƒë·ª£i", "EXPERIENCE": "Tr·∫£i nghi·ªám",
        "FEED": "Cho ƒÉn", "FEEL": "C·∫£m th·∫•y", "FILL": "L·∫•p ƒë·∫ßy", "FIX": "S·ª≠a ch·ªØa", "FOLLOW": "Theo sau",
        "FORGET": "Qu√™n", "FORGIVE": "Tha th·ª©", "FREEZE": "ƒê√≥ng bƒÉng", "GAIN": "ƒê·∫°t ƒë∆∞·ª£c", "GET": "Nh·∫≠n/L·∫•y",
        "GIVE": "Cho", "GROW": "Ph√°t tri·ªÉn", "GUESS": "ƒêo√°n", "HANDLE": "X·ª≠ l√Ω", "HATE": "Gh√©t",
        "HIDE": "Gi·∫•u/Tr·ªën", "HIRE": "Thu√™", "HIT": "ƒê√°nh/Va ch·∫°m", "HOLD": "C·∫ßm", "HOPE": "Hy v·ªçng",
        "HURT": "L√†m ƒëau", "IGNORE": "Ph·ªõt l·ªù", "IMAGINE": "T∆∞·ªüng t∆∞·ª£ng", "IMPROVE": "C·∫£i thi·ªán", "INCLUDE": "Bao g·ªìm",
        "INCREASE": "TƒÉng l√™n", "INFORM": "Th√¥ng b√°o", "INJURE": "B·ªã th∆∞∆°ng", "INSIST": "KhƒÉng khƒÉng", "INSTALL": "C√†i ƒë·∫∑t",
        "INTEND": "D·ª± ƒë·ªãnh", "INTRODUCE": "Gi·ªõi thi·ªáu", "INVITE": "M·ªùi", "INVOLVE": "Li√™n quan", "JOIN": "Tham gia",
        "KEEP": "Gi·ªØ", "KNOW": "Bi·∫øt", "LAUGH": "C∆∞·ªùi", "LEARN": "H·ªçc", "LEAVE": "R·ªùi ƒëi",
        "LEND": "Cho m∆∞·ª£n", "LIE": "N√≥i d·ªëi", "LISTEN": "Nghe", "LIVE": "S·ªëng", "LOCK": "Kh√≥a",
        "LOSE": "M·∫•t", "MAKE": "L√†m", "MANAGE": "Qu·∫£n l√Ω", "MEAN": "C√≥ nghƒ©a l√†", "MEET": "G·∫∑p",
        "MENTION": "ƒê·ªÅ c·∫≠p", "MISS": "Nh·ªõ/B·ªè l·ª°", "MOVE": "Di chuy·ªÉn", "NEED": "C·∫ßn", "NOTICE": "Ch√∫ √Ω",
        "OFFER": "ƒê·ªÅ ngh·ªã", "OPEN": "M·ªü", "OPERATE": "V·∫≠n h√†nh", "ORGANIZE": "T·ªï ch·ª©c", "OWN": "S·ªü h·ªØu",
        "PASS": "V∆∞·ª£t qua", "PAY": "Tr·∫£ ti·ªÅn", "PERFORM": "Bi·ªÉu di·ªÖn", "PERSUADE": "Thuy·∫øt ph·ª•c", "PICK": "Ch·ªçn",
        "PLAN": "L√™n k·∫ø ho·∫°ch", "PLAY": "Ch∆°i", "POINT": "Ch·ªâ tr·ªè", "POSTPONE": "Ho√£n l·∫°i", "PRACTICE": "Luy·ªán t·∫≠p",
        "PREPARE": "Chu·∫©n b·ªã", "PRETEND": "Gi·∫£ v·ªù", "PREVENT": "NgƒÉn ch·∫∑n", "PRODUCE": "S·∫£n xu·∫•t", "PROMISE": "H·ª©a",
        "PROTECT": "B·∫£o v·ªá", "PROVE": "Ch·ª©ng minh", "PROVIDE": "Cung c·∫•p", "PUBLISH": "Xu·∫•t b·∫£n", "PUNISH": "Tr·ª´ng ph·∫°t",
        "QUIT": "T·ª´ b·ªè", "RAISE": "N√¢ng l√™n", "REALIZE": "Nh·∫≠n ra", "REBUILD": "X√¢y l·∫°i", "RECOGNIZE": "Nh·∫≠n di·ªán",
        "RECOVER": "H·ªìi ph·ª•c", "REDUCE": "Gi·∫£m b·ªõt", "REFUSE": "T·ª´ ch·ªëi", "REGRET": "H·ªëi ti·∫øc", "RELAX": "Th∆∞ gi√£n",
        "REMIND": "Nh·∫Øc nh·ªü", "REMOVE": "Lo·∫°i b·ªè", "REPAIR": "S·ª≠a ch·ªØa", "REPLACE": "Thay th·∫ø", "REPLY": "Ph·∫£n h·ªìi",
        "REPORT": "B√°o c√°o", "REQUEST": "Y√™u c·∫ßu", "REQUIRE": "Y√™u c·∫ßu", "RESCUE": "Gi·∫£i c·ª©u", "RESPECT": "T√¥n tr·ªçng",
        "RETURN": "Tr·ªü l·∫°i", "REVEAL": "Ti·∫øt l·ªô", "RING": "Reo chu√¥ng", "RISE": "TƒÉng l√™n", "RISK": "M·∫°o hi·ªÉm",
        "RULE": "Cai tr·ªã", "RUN": "Ch·∫°y", "SATISFY": "L√†m h√†i l√≤ng", "SAVE": "L∆∞u/C·ª©u", "SAY": "N√≥i",
        "SCARE": "L√†m s·ª£", "SCORE": "Ghi ƒëi·ªÉm", "SCREAM": "H√©t", "SEARCH": "T√¨m ki·∫øm", "SEE": "Nh√¨n th·∫•y",
        "SEEK": "T√¨m ki·∫øm", "SELECT": "L·ª±a ch·ªçn", "SELL": "B√°n", "SEND": "G·ª≠i", "SEPARATE": "T√°ch r·ªùi",
        "SERVE": "Ph·ª•c v·ª•", "SET": "Thi·∫øt l·∫≠p", "SHAKE": "L·∫Øc", "SHARE": "Chia s·∫ª", "SHIFT": "Chuy·ªÉn ƒë·ªïi",
        "SHOOT": "B·∫Øn", "SHOUT": "H√©t", "SHOW": "Ch·ªâ ra", "SHUT": "ƒê√≥ng", "SIGN": "K√Ω t√™n",
        "SING": "H√°t", "SINK": "Ch√¨m", "SIT": "Ng·ªìi", "SLEEP": "Ng·ªß", "SLIDE": "Tr∆∞·ª£t",
        "SMELL": "Ng·ª≠i", "SMILE": "M·ªâm c∆∞·ªùi", "SMOKE": "H√∫t thu·ªëc", "SOLVE": "Gi·∫£i quy·∫øt", "SOUND": "Nghe c√≥ v·∫ª",
        "SPEAK": "N√≥i", "SPEND": "Chi ti√™u/D√†nh", "SPILL": "L√†m ƒë·ªï", "SPOIL": "L√†m h·ªèng", "SPREAD": "Lan truy·ªÅn",
        "STAND": "ƒê·ª©ng", "START": "B·∫Øt ƒë·∫ßu", "STARVE": "Ch·∫øt ƒë√≥i", "STAY": "·ªû l·∫°i", "STEAL": "ƒÇn tr·ªôm",
        "STICK": "D√°n", "STING": "Ch√¢m/ƒê·ªët", "STOP": "D·ª´ng l·∫°i", "STRIKE": "ƒê√¨nh c√¥ng", "STRUGGLE": "ƒê·∫•u tranh",
        "STUDY": "H·ªçc", "SUCCEED": "Th√†nh c√¥ng", "SUFFER": "Ch·ªãu ƒë·ª±ng", "SUGGEST": "G·ª£i √Ω", "SUPPORT": "·ª¶ng h·ªô",
        "SUPPOSE": "Cho r·∫±ng", "SURPRISE": "Ng·∫°c nhi√™n", "SURVIVE": "S·ªëng s√≥t", "SUSPECT": "Nghi ng·ªù", "SWEAR": "Th·ªÅ",
        "SWIM": "B∆°i", "TAKE": "C·∫ßm/L·∫•y", "TALK": "N√≥i chuy·ªán", "TASTE": "N·∫øm", "TEACH": "D·∫°y",
        "TEAR": "X√©", "TELL": "K·ªÉ/B·∫£o", "TEND": "C√≥ khuynh h∆∞·ªõng", "TEST": "Ki·ªÉm tra", "THANK": "C·∫£m ∆°n",
        "THINK": "Nghƒ©", "THREATEN": "ƒêe d·ªça", "THROW": "N√©m", "TIE": "Bu·ªôc", "TOUCH": "Ch·∫°m",
        "TRAIN": "ƒê√†o t·∫°o", "TRANSLATE": "D·ªãch", "TRAVEL": "Du l·ªãch", "TREAT": "ƒê·ªëi x·ª≠", "TRUST": "Tin t∆∞·ªüng",
        "TRY": "Th·ª≠", "TURN": "R·∫Ω", "UNDERSTAND": "Hi·ªÉu", "UPDATE": "C·∫≠p nh·∫≠t", "USE": "S·ª≠ d·ª•ng",
        "VALUE": "Tr√¢n tr·ªçng", "VANISH": "Bi·∫øn m·∫•t", "VISIT": "ThƒÉm", "VOTE": "B·∫ßu c·ª≠", "WAIT": "Ch·ªù ƒë·ª£i",
        "WAKE": "Th·ª©c d·∫≠y", "WALK": "ƒêi b·ªô", "WANT": "Mu·ªën", "WARN": "C·∫£nh b√°o", "WASH": "R·ª≠a",
        "WASTE": "L√£ng ph√≠", "WATCH": "Xem", "WAVE": "V·∫´y tay", "WEAR": "M·∫∑c", "WEIGH": "C√¢n",
        "WELCOME": "Ch√†o ƒë√≥n", "WHISPER": "Th√¨ th·∫ßm", "WIN": "Th·∫Øng", "WISH": "∆Ø·ªõc", "WONDER": "T·ª± h·ªèi",
        "WORK": "L√†m vi·ªác", "WORRY": "Lo l·∫Øng", "WRITE": "Vi·∫øt", "CHALLENGE": "Th·ª≠ th√°ch", "COMBINE": "K·∫øt h·ª£p",
        "CONFIRM": "X√°c nh·∫≠n", "CONFUSE": "L√†m r·ªëi tr√≠", "CONSTRUCT": "X√¢y d·ª±ng", "CREATE": "T·∫°o ra",
        "CRITICIZE": "Ch·ªâ tr√≠ch", "DEPEND": "Ph·ª• thu·ªôc", "DESCRIBE": "M√¥ t·∫£", "DOUBT": "Nghi ng·ªù",
        "EARN": "Ki·∫øm ti·ªÅn", "EMPHASIZE": "Nh·∫•n m·∫°nh", "ENABLE": "Cho ph√©p", "ENCOUNTER": "G·∫∑p ph·∫£i"
    };

    const wordList = Object.keys(dictionary);

    // --- 2. DATA: QUESTIONS (B1+) ---
    const questionBank = [
        {w: "ACHIEVE", s: "Despite facing many obstacles, she worked day and night to ______ her lifelong ambition."},
        {w: "ADMIT", s: "It takes a lot of courage to ______ that you were wrong in front of so many people."},
        {w: "ADVISE", s: "Given the current weather conditions, I strongly ______ you not to drive tonight."},
        {w: "AGREE", s: "Although I understand your point of view, I'm afraid I cannot fully ______ with your conclusion."},
        {w: "ALLOW", s: "The museum rules do not ______ visitors to take photographs with flash."},
        {w: "ANNOY", s: "It really starts to ______ me when people talk loudly during a movie."},
        {w: "APOLOGISE", s: "You should ______ to your colleague for the misunderstanding you caused yesterday."},
        {w: "APPEAR", s: "Based on the evidence, it would ______ that the suspect left the country last week."},
        {w: "APPLY", s: "To get this scholarship, you must ______ before the deadline at the end of the month."},
        {w: "ARGUE", s: "It is pointless to ______ with him; he never listens to anyone else's opinion."},
        {w: "ARRANGE", s: "Can you help me ______ a meeting with the director for next Tuesday morning?"},
        {w: "ATTEMPT", s: "The rescuers will ______ to reach the stranded climbers as soon as the storm passes."},
        {w: "AVOID", s: "To stay healthy, doctors suggest we should ______ eating processed foods high in sugar."},
        {w: "BEHAVE", s: "The teacher expected the students to ______ responsibly during the school trip."},
        {w: "BLAME", s: "It is unfair to ______ him for the mistake when he wasn't even in the office."},
        {w: "BREATHE", s: "The air in the mountains is so fresh that it feels wonderful to ______ deeply."},
        {w: "CANCEL", s: "Due to the unexpected strike, the airline had to ______ all flights to Paris."},
        {w: "CELEBRATE", s: "We are planning a big party to ______ our parents' 25th wedding anniversary."},
        {w: "COMPLAIN", s: "If the service in the hotel is poor, you have the right to ______ to the manager."},
        {w: "CONCENTRATE", s: "I find it very difficult to ______ on my studies when the television is on."},
        {w: "CONSIDER", s: "Before you make a final decision, you should ______ all the possible consequences."},
        {w: "CONTAIN", s: "Please be careful with that box; it may ______ fragile glass items."},
        {w: "CONTINUE", s: "Despite the rain, they decided to ______ their journey towards the summit."},
        {w: "CONVINCE", s: "I tried to ______ him to join our team, but he had already made up his mind."},
        {w: "DAMAGE", s: "The heavy storm caused significant ______ to the roof of the old building."},
        {w: "DELAY", s: "Technical problems caused a three-hour ______ to the train schedule."},
        {w: "DEMAND", s: "The workers went on strike to ______ better working conditions and higher wages."},
        {w: "DESERVE", s: "After working so hard on this project, you definitely ______ a long holiday."},
        {w: "DESTROY", s: "Pollution threatens to ______ the natural habitat of many rare species."},
        {w: "DEVELOP", s: "Reading extensively helps children to ______ their vocabulary and imagination."},
        {w: "DISAPPOINT", s: "I promised to help you move house, and I won't ______ you."},
        {w: "DISCOVER", s: "Scientists are working hard to ______ a cure for this rare disease."},
        {w: "ENCOURAGE", s: "A good teacher should ______ students to ask questions and express their ideas."},
        {w: "ESCAPE", s: "The bird managed to ______ from its cage because the door was left open."},
        {w: "EVALUATE", s: "We need more time to ______ the effectiveness of the new marketing strategy."},
        {w: "EXCHANGE", s: "If the shirt doesn't fit, you can ______ it for a different size at the store."},
        {w: "EXIST", s: "Many people wonder if life can ______ on other planets in the universe."},
        {w: "EXPECT", s: "We didn't ______ the exam to be so difficult, so we were quite unprepared."},
        {w: "EXPERIENCE", s: "Traveling alone is a great way to ______ different cultures and meet new people."},
        {w: "FORGET", s: "I will never ______ the moment I saw the ocean for the first time."},
        {w: "FORGIVE", s: "It can be very hard to ______ someone who has betrayed your trust."},
        {w: "IMAGINE", s: "Can you ______ what the world would be like without the internet?"},
        {w: "IMPROVE", s: "She is taking an intensive course to ______ her English speaking skills."},
        {w: "INFORM", s: "Please ______ us immediately if there are any changes to your contact details."},
        {w: "INSIST", s: "I must ______ that you let me pay for dinner this time."},
        {w: "INTEND", s: "I didn't ______ to hurt your feelings with my comment; I was just joking."},
        {w: "INVOLVE", s: "The new job will ______ a lot of international travel and meetings."},
        {w: "MANAGE", s: "How did you ______ to finish all that work in such a short time?"},
        {w: "MENTION", s: "Did he ______ anything about the upcoming conference during the meeting?"},
        {w: "PERSUADE", s: "It took hours to ______ her to come to the party with us."},
        {w: "POSTPONE", s: "We have to ______ the meeting until next week because the boss is ill."},
        {w: "PREPARE", s: "You need to ______ thoroughly if you want to pass the entrance exam."},
        {w: "PRETEND", s: "Don't ______ that you don't know what I'm talking about."},
        {w: "PREVENT", s: "Regular exercise and a healthy diet can help ______ heart disease."},
        {w: "PROMISE", s: "If you ______ to keep it a secret, I will tell you what happened."},
        {w: "PROTECT", s: "It is our duty to ______ the environment for future generations."},
        {w: "PROVIDE", s: "The government should ______ free education for all children."},
        {w: "PUNISH", s: "The school has strict rules to ______ students who cheat in exams."},
        {w: "RECOGNIZE", s: "She had changed so much that I didn't ______ her at first."},
        {w: "RECOVER", s: "It took him a long time to ______ from the serious injury."},
        {w: "REFUSE", s: "He is so stubborn that he will likely ______ any help we offer."},
        {w: "REGRET", s: "You will ______ it later if you don't take this opportunity now."},
        {w: "REMIND", s: "Could you please ______ me to call my mother later tonight?"},
        {w: "REPLACE", s: "We need to ______ the old batteries in the remote control."},
        {w: "REQUIRE", s: "This position will ______ you to work on weekends occasionally."},
        {w: "RESCUE", s: "Firefighters managed to ______ the family from the burning building."},
        {w: "SATISFY", s: "It is impossible to ______ everyone when making a group decision."},
        {w: "SUCCEED", s: "To ______ in business, you need determination and a bit of luck."},
        {w: "SUGGEST", s: "I ______ that we leave early to avoid the heavy traffic."},
        {w: "SUPPORT", s: "My family has always been there to ______ me in my career choices."},
        {w: "SURVIVE", s: "Plants cannot ______ without water and sunlight for long."},
        {w: "THREATEN", s: "He started to ______ to call the police if they didn't leave."},
        {w: "TRANSLATE", s: "Can you help me ______ this document from French into English?"},
        {w: "WARN", s: "The signs are there to ______ drivers about the sharp turn ahead."},
        {w: "WONDER", s: "I often ______ what happened to my old friends from primary school."},
        {w: "INVESTIGATE", s: "The police arrived to ______ the scene of the crime."},
        {w: "DECREASE", s: "We must try to ______ our energy consumption to save money."},
        {w: "RECYCLE", s: "It is important to ______ plastic bottles to reduce waste."},
        {w: "ADAPT", s: "It took him a while to ______ to the cold climate of the new country."},
        {w: "AFFECT", s: "The bad weather will definitely ______ our plans for the weekend."},
        {w: "ADMIRE", s: "I really ______ her for her courage and determination."},
        {w: "ATTACH", s: "Don't forget to ______ your CV to the application email."},
        {w: "ATTRACT", s: "The bright colors of the flowers ______ bees and butterflies."},
        {w: "COMMUNICATE", s: "In a relationship, it is vital to ______ openly and honestly."},
        {w: "COMPETE", s: "Athletes from all over the world come to ______ in the Olympics."},
        {w: "CONNECT", s: "This train line will ______ the city center with the airport."},
        {w: "CREATE", s: "The artist wants to ______ a sculpture that represents freedom."},
        {w: "DEFEND", s: "A lawyer was hired to ______ the accused man in court."},
        {w: "DELIVER", s: "The courier promised to ______ the package by tomorrow morning."},
        {w: "DENY", s: "He continued to ______ the accusations despite the evidence."},
        {w: "DESCRIBE", s: "Words cannot ______ how beautiful the sunset was yesterday."},
        {w: "DESIGN", s: "Architects ______ buildings that are both functional and artistic."},
        {w: "DIRECT", s: "Can you ______ me to the nearest train station?"},
        {w: "DISCUSS", s: "We need to ______ the budget before approving the project."},
        {w: "EARN", s: "She works two jobs to ______ enough money to support her family."},
        {w: "EMPLOY", s: "The new factory is expected to ______ over 500 local workers."}
    ];

    // --- 3. EMOJI DATA (No More Broken Images!) ---
    const sadEmojis = ["üò¢", "ü§¶‚Äç‚ôÇÔ∏è", "üòø", "üíî", "ü§î", "ü´£", "üò≠", "ü•Ä", "ü§ï", "ü§∑"];
    
    // Result screen emojis
    const resultEmojis = {
        bad: "üò≠",
        avg: "üòé",
        good: "üèÜ"
    };

    // --- 4. LOGIC ---
    let quizSet = [];
    let currentIdx = 0;
    let score = 0;
    let username = "";
    let startTime, endTime;
    let timerInterval;

    function startQuiz() {
        const inp = document.getElementById("username");
        const name = inp.value.trim().toUpperCase();
        if (!name) {
            document.getElementById("error-msg").style.display = "block";
            return;
        }
        username = name;

        // Shuffle
        const shuffled = [...questionBank].sort(() => 0.5 - Math.random());
        quizSet = shuffled.slice(0, 50);
        currentIdx = 0;
        score = 0;

        // UI
        document.getElementById("login-screen").style.display = "none";
        document.getElementById("quiz-screen").style.display = "block";
        document.getElementById("player-name").innerText = username;

        // Timer
        startTime = new Date();
        timerInterval = setInterval(updateTimer, 1000);

        loadQuestion();
    }

    function updateTimer() {
        const now = new Date();
        const diff = Math.floor((now - startTime) / 1000);
        const mins = Math.floor(diff / 60).toString().padStart(2, '0');
        const secs = (diff % 60).toString().padStart(2, '0');
        document.getElementById("timer-display").innerText = `${mins}:${secs}`;
    }

    function loadQuestion() {
        document.getElementById("feedback-section").style.display = "none";
        document.getElementById("emoji-display").innerText = ""; // Clear emoji
        
        const qData = quizSet[currentIdx];
        const correctWord = qData.w;

        document.getElementById("q-current").innerText = currentIdx + 1;
        document.getElementById("progress-bar").style.width = `${((currentIdx) / 50) * 100}%`;
        document.getElementById("question-text").innerText = qData.s;

        const distractors = wordList.filter(w => w !== correctWord);
        const randomDistractors = distractors.sort(() => 0.5 - Math.random()).slice(0, 3);
        const options = [correctWord, ...randomDistractors].sort(() => 0.5 - Math.random());

        const container = document.getElementById("options-container");
        container.innerHTML = "";
        container.style.pointerEvents = "auto";

        options.forEach(opt => {
            const btn = document.createElement("div");
            btn.className = "option-card";
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(btn, opt, correctWord, options);
            container.appendChild(btn);
        });
    }

    function checkAnswer(btn, selected, correct, allOptions) {
        document.getElementById("options-container").style.pointerEvents = "none";
        const allBtns = document.querySelectorAll(".option-card");
        const isCorrect = (selected === correct);

        if (isCorrect) {
            btn.classList.add("correct");
            score++;
            triggerConfetti();
        } else {
            btn.classList.add("wrong");
            allBtns.forEach(b => { if (b.innerText === correct) b.classList.add("correct"); });
            showSadEmoji(); // Show Static Emoji instead of Meme
        }
        allBtns.forEach(b => b.classList.add("disabled"));
        showFeedback(isCorrect, correct, allOptions);
    }

    function showFeedback(isCorrect, correctWord, displayedOptions) {
        const section = document.getElementById("feedback-section");
        const title = document.getElementById("feedback-title");
        const vocabDiv = document.getElementById("vocab-definitions");

        if (isCorrect) {
            title.innerHTML = "üéâ CORRECT!";
            title.className = "feedback-title feedback-correct";
        } else {
            title.innerHTML = `‚ùå WRONG! The correct answer is: ${correctWord}`;
            title.className = "feedback-title feedback-wrong";
        }

        let html = "";
        displayedOptions.forEach(w => {
            const mean = dictionary[w] || "Unknown definition";
            const hlClass = (w === correctWord) ? "vocab-hl" : "";
            html += `<div class="vocab-item ${hlClass}">‚Ä¢ <strong>${w}</strong>: ${mean}</div>`;
        });
        vocabDiv.innerHTML = html;

        section.style.display = "block";
    }

    function showSadEmoji() {
        const emoji = sadEmojis[Math.floor(Math.random() * sadEmojis.length)];
        document.getElementById("emoji-display").innerText = emoji;
    }

    function triggerConfetti() {
        confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
    }

    function nextQuestion() {
        currentIdx++;
        if (currentIdx < 50) {
            loadQuestion();
        } else {
            finishQuiz();
        }
    }

    function finishQuiz() {
        clearInterval(timerInterval);
        endTime = new Date();
        const durationSeconds = Math.floor((endTime - startTime) / 1000);
        const mins = Math.floor(durationSeconds / 60);
        const secs = durationSeconds % 60;
        const timeString = `${mins}m ${secs}s`;

        document.getElementById("quiz-screen").style.display = "none";
        document.getElementById("result-screen").style.display = "block";

        const percent = Math.round((score / 50) * 100);
        let color, msg, emojiChar;

        if (percent < 50) {
            color = "var(--danger)";
            msg = "DON'T GIVE UP, TRY AGAIN!";
            emojiChar = resultEmojis.bad;
        } else if (percent < 80) {
            color = "var(--warning)";
            msg = "GOOD JOB! KEEP GOING!";
            emojiChar = resultEmojis.avg;
        } else {
            color = "var(--success)";
            msg = "EXCELLENT! SUPERSTAR!";
            emojiChar = resultEmojis.good;
        }

        const border = document.getElementById("result-container");
        border.style.borderColor = color;
        const title = document.getElementById("result-msg");
        title.innerText = msg;
        title.style.color = color;
        document.getElementById("final-score").innerText = `${score}/50`;
        document.getElementById("final-score").style.color = color;
        document.getElementById("final-percent").innerText = `(${percent}%)`;
        
        // Use Emoji for result too
        document.getElementById("result-emoji").innerText = emojiChar;

        const now = new Date();
        document.getElementById("res-name").innerText = username;
        document.getElementById("res-date").innerText = now.toLocaleDateString("en-GB");
        document.getElementById("res-duration").innerText = timeString;
        document.getElementById("res-accuracy").innerText = `${percent}%`;
    }

</script>
</body>
</html>